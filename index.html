<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #0a001f, #1a0033);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Arial', sans-serif;
        }

        .diya {
            position: absolute;
            width: 40px;
            height: 20px;
            border-radius: 50%;
            background: #963;
            transform-origin: center;
        }

        .flame {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 15px;
            background: #ff6;
            border-radius: 50% 50% 20% 20%;
            animation: flicker 0.5s ease-in-out infinite alternate;
        }

        @keyframes flicker {
            0%, 100% { transform: translateX(-50%) scale(1); opacity: 1; }
            50% { transform: translateX(-50%) scale(0.95); opacity: 0.8; }
        }

        #beam {
    content: 'üöÄ';
    position: absolute;
    width: 100%; /* Change to 100% for responsive width */
    height: 10vh; /* Change to 10vh for responsive height */
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(15deg);
    background: linear-gradient(120deg, transparent, rgba(255, 223, 0, 0.4), transparent);
    filter: blur(10px);
    animation: beamMove 5s infinite linear;
}

@keyframes beamMove {
    0% { transform: translate(-50%, -50%) rotate(15deg) translateX(-100%); }
    100% { transform: translate(-50%, -50%) rotate(15deg) translateX(100%); }
}

/* Media queries for mobile responsiveness */
@media (max-width: 768px) {
    #beam {
        height: 15vh; /* Adjust height for mobile */
        top: 35%; /* Adjust position for mobile */
    }
}


/* 
        #beam1 {
            position: absolute;
            width: 100vw;
            height: 10vw;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(15deg);
            background: linear-gradient(120deg, transparent, rgba(255, 223, 0, 0.4), transparent);
            filter: blur(10px);
            animation: beamMove 5s infinite linear;
        }

        @keyframes beamMove {
            0% { transform: translate(-50%, -50%) rotate(15deg) translateX(-100vw); }
            100% { transform: translate(-50%, -50%) rotate(15deg) translateX(100vw); }
        } */

        #text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: min(15vw, 120px);
            font-weight: bold;
            text-align: center;
            opacity: 0;
            animation: textReveal 2.5s ease forwards;
            animation-delay: 1s;
        }

        #text-main {
    font-family: "Poppins", sans-serif;
    font-weight: 900;
    font-style: normal;
    font-size: min(20vw, 200px); /* Responsive font size */
    color: #ffd700;
    text-shadow: 0 0 15px rgba(255, 223, 0, 0.6), 0 0 30px rgba(255, 102, 0, 0.4);
}

#text-sub {
    font-size: min(5vw, 40px);
    margin-top: 20px;
    color: #ffd700;
    opacity: 0.8;
}

.email-input {
    padding: 1em;
    border-radius: 8px;
    border: 1px solid #ff7f50;
    width: 50vw; /* Responsive width */
    font-size: min(3vw, 24px); /* Responsive font size */
}

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 1s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.2; }
            100% { opacity: 1; }
        }

        @keyframes textReveal {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5) rotate(-15deg);
        filter: blur(8px) drop-shadow(0 0 10px rgba(255, 105, 180, 0.5));
        color: #ff69b4;
        text-shadow: 
            0 0 10px rgba(255, 105, 180, 0.7), 
            0 0 20px rgba(255, 182, 193, 0.5),
            0 0 30px rgba(255, 60, 100, 0.3);
    }
    30% {
        opacity: 0.7;
        transform: translate(-50%, -50%) scale(1.1) rotate(5deg);
        filter: blur(4px) drop-shadow(0 0 15px rgba(255, 215, 0, 0.7));
        color: #ffd700;
        text-shadow: 
            0 0 15px rgba(255, 215, 0, 0.8), 
            0 0 30px rgba(255, 140, 0, 0.5),
            0 0 40px rgba(255, 245, 0, 0.4);
    }
    70% {
        opacity: 0.9;
        transform: translate(-50%, -50%) scale(1.05) rotate(-2deg);
        filter: blur(2px) drop-shadow(0 0 20px rgba(255, 245, 0, 0.9));
        color: #ffeb3b;
        text-shadow: 
            0 0 20px rgba(255, 245, 0, 0.9), 
            0 0 40px rgba(255, 215, 0, 0.7),
            0 0 60px rgba(255, 245, 0, 0.5);
    }
    100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1) rotate(0deg);
        filter: blur(0px) drop-shadow(0 0 30px rgba(255, 245, 0, 1));
        color: #ffd700;
        text-shadow: 
            0 0 30px rgba(255, 245, 0, 1), 
            0 0 60px rgba(255, 215, 0, 0.8),
            0 0 90px rgba(255, 245, 0, 0.6);
    }
}


        .particle {
            position: absolute;
            background: linear-gradient(45deg, #ff4400, #ff9900);
            border-radius: 50%;
            transform-origin: center;
        }

        .decoration {
            position: absolute;
            font-size: 24px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        
        
        
        
        
        


/* CSS */
.button-85 {
    padding: 1em 1em;
    border: none;
    outline: none;
    color: rgb(255, 255, 255);
    background: #8b0000; /* Darker festive red background */
    cursor: pointer;
    position: relative;
    z-index: 0;
    border-radius: 10px;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
    font-weight: bold;
    font-size: min(3vw, 24px); /* Responsive font size */
    font-family: 'Verdana', sans-serif;
}

.button-85:before {
  content: "";
  background: linear-gradient(
    45deg,
    #ff7f50, /* Coral */
    #ffb347, /* Mango yellow */
    #ffd700, /* Gold */
    #ff6347, /* Tomato */
    #ff4500, /* Orange Red */
    #ff69b4  /* Hot Pink */
  );
  position: absolute;
  top: -2px;
  left: -2px;
  background-size: 200%;
  z-index: -1;
  filter: blur(8px); /* Increased blur for a softer glow */
  width: calc(100% + 6px);
  height: calc(100% + 6px);
  animation: glowing-button-85 10s linear infinite; /* Faster animation */
  transition: opacity 0.3s ease-in-out;
  border-radius: 10px;
}

@keyframes glowing-button-85 {
  0% {
    background-position: 0 0;
  }
  50% {
    background-position: 200% 0;
  }
  100% {
    background-position: 0 0;
  }
}

.button-85:after {
  z-index: -1;
  content: "";
  position: absolute;
  width: 100%;
  height: 100%;
  background: #8b0000; /* Matches the button color */
  left: 0;
  top: 0;
  border-radius: 10px;
  box-shadow: 0px 0px 15px rgba(255, 165, 0, 0.6); /* Soft orange glow around the button */
}





  .email-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: absolute;
            bottom: 20px;
        }

        .email-input {
            padding: 0.5em;
            border-radius: 8px;
            border: 1px solid #ff7f50;
            width: 250px;
           
        }

        .email-button {
            margin-top: 10px;
            padding: 0.6em 1.2em;
            border: none;
            border-radius: 8px;
            color: #fff;
            background-color: #8b0000;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Verdana', sans-serif;
            filter: drop-shadow(0px 0px 10px rgba(255, 165, 0, 0.6));
        }

        /* Popup styles */
        /* Base styling for the popup */
.popup {
    position: fixed;
    top: 10px; /* Positioned near the top */
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.85);
    color: #ffd700;
    padding: 1em 2em;
    border-radius: 5px;
    text-align: center;
    font-size: 1.1em;
    font-weight: bold;
    min-width: 250px;
    display: none;
    z-index: 1000;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.popup.show {
    display: block;
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* Styling for success and error messages */
.popup.success {
    background-color: #28a745; /* Green for success */
    color: #ffffff;
}

.popup.error {
    background-color: #dc3545; /* Red for error */
    color: #ffffff;
}


@media (max-width: 768px) {
    #text-main {
        font-size: min(15vw, 120px);
    }
    
    .email-input {
        width: 80vw;
        font-size: min(5vw, 20px);
    }
    
    .button-85 {
        font-size: min(5vw, 20px);
    }
}

@media (max-width: 480px) {
    #text-main {
        font-size: min(10vw, 80px);
    }
    
    .email-input {
        width: 90vw;
        font-size: min(5vw, 18px);
    }
    
    .button-85 {
        font-size: min(5vw, 18px);
    }
}


    </style>
</head>
<body>
    
    <!-- <div id="beam"></div> -->
    

    <div id="text">
        <div id="text-main">HAPPY DIWALI</div>
        <div id="text-sub">
            <input type="email" id="email" class="email-input" placeholder="Enter your email" required>
            <button id="send-gift-button" class="button-85" onclick="checkEmail()">Send GiftüòÅ</button>
        </div>
        <div id="popup" class="popup"></div>
        
    </div>
    <div id="popup" class="popup"></div>  
    <script>

// function createRockets() {
//             for (let i = 0; i < 5; i++) {
//                 const rocket = document.createElement('div');
//                 rocket.className = 'rocket';
//                 rocket.style.animationDelay = `${Math.random() * 1}s`;
//                 rocket.style.transform = `rotate(${Math.random() * 360}deg)`;
//                 rocket.style.left = `${Math.random() * 100}vw`;
//                 rocket.style.top = `${Math.random() * 100}vh`;
//                 rocket.style.animationDelay = `${Math.random() * 1}s`;
//                 rocket.style.transform = `rotate(${Math.random() * 360}deg)`;
//                 document.body.appendChild(rocket);

//                 // setTimeout(() => {
//                 //     rocket.remove();
//                 // }, 2000);
//             }
//         }

        document.addEventListener('DOMContentLoaded', () => {
            createStars();
            createDiyas();
            createRockets();

            setInterval(createRockets, 3000);
        });



        async function checkEmail() {
    const emailInput = document.getElementById('email');
    const popup = document.getElementById('popup');
    const email = emailInput.value;
    const button = document.getElementById('send-gift-button');

    // Replace this with the actual token you want to use
    const token = "sadanandbhai"; // Replace with your actual token string

    // Basic email validation
    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?$/;
    if (!emailRegex.test(email)) {
        popup.textContent = 'Please enter a valid email address.';
        popup.className = 'popup show error'; // Apply error styling
        setTimeout(() => popup.classList.remove('show'), 1000);
        return;
    }

    // Show loading state
    emailInput.style.display = 'none'; // Hide the email input
    button.textContent = 'Sending...'; // Change button text
    button.disabled = true; // Disable button to prevent multiple clicks

    // API call to check email validity
    try {
        const response = await fetch('https://surf-tasteful-swing.glitch.me/diwali', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}` // Add the token in the headers
            },
            body: JSON.stringify({ email })
        });

        const result = await response.json();
        console.log(result);
        
        // Display message based on true/false response
        if (result) {
            popup.textContent = 'Gift sentüéâ Check Mail.';
            popup.className = 'popup show success'; // Apply success styling
        } else {
            popup.textContent = 'Write email correctly‚ùå.';
            popup.className = 'popup show error'; // Apply error styling
        }
    } catch (error) {
        console.error('Error:', error);
        popup.textContent = 'Something went wrong. Please try again.';
        popup.className = 'popup show error'; // Apply error styling for failure
    } finally {
        // Revert button text and enable it again
        button.textContent = 'Send GiftüòÅ'; // Reset button text
        button.disabled = false; // Enable button
        setTimeout(() => {
            popup.classList.remove('show');
            emailInput.style.display = 'inline'; // Show the email input again after the popup message
        }, 2800);
    }
}

        function createStars() {
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}vw`;
                star.style.top = `${Math.random() * 100}vh`;
                star.style.animationDelay = `${Math.random() * 1}s`;
                document.body.appendChild(star);
            }
        }

        function createDiyas() {
            const positions = [
                { bottom: '10%', left: '10%' },
                { bottom: '10%', right: '10%' },
                { bottom: '20%', left: '20%' },
                { bottom: '20%', right: '20%' },
                { top: '20%', left: '10%' },
                { top: '20%', right: '10%' }
            ];

            positions.forEach((pos, i) => {
                const diya = document.createElement('div');
                diya.className = 'diya';
                Object.assign(diya.style, pos);
                
                const flame = document.createElement('div');
                flame.className = 'flame';
                diya.appendChild(flame);
                
                setTimeout(() => {
                    document.body.appendChild(diya);
                }, i * 300);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            createStars();
            createDiyas();
        });
    </script>
</body>
</html>
